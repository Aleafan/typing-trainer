{"version":3,"sources":["components/Text.js","components/BtnRestart.js","components/Speed.js","components/Precision.js","components/Result.js","components/Trainer.js","components/Header.js","components/Footer.js","App.js","index.js"],"names":["Text","props","text","className","split","map","symbol","i","id","icon","faRobot","React","memo","BtnRestart","forwardRef","ref","type","onClick","handleRestart","faRedoAlt","Speed","faClock","speed","Precision","current","errors","precision","Math","round","faCrosshairs","Result","record","JSON","parse","localStorage","getItem","newRecord","setItem","stringify","faTrophy","defaultText","Trainer","useState","setCurrent","setErrors","setText","start","setStart","fetchText","a","fetch","response","ok","Error","json","console","error","useEffect","handleKeyDown","e","key","length","c","document","addEventListener","removeEventListener","main","useRef","setInterval","classList","toggle","clearInterval","currSymbol","getElementById","add","prevSymbol","replace","remove","setSpeed","time","countSpeed","btnRestart","finish","blur","Header","faKeyboard","Footer","App","Fragment","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.1e56bac1.chunk.js","sourcesContent":["import React from \"react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faRobot } from '@fortawesome/free-solid-svg-icons';\n\nfunction Text(props) {\n  const {text} = props;\n  return (\n    <div className={text ? 'text text-font' : 'text mes-prepare'}>\n      <p>\n        {text\n          ? text.split('').map((symbol, i) => <span key={i} id={i}>{symbol}</span>)\n          : 'Приготовьтесь, загружается текст...'}\n      </p>\n      {!text && \n        <FontAwesomeIcon icon={faRobot} />}\n      <div className='notification'>\n        <p>Ваш персональный компьютер не поддерживается.</p>\n        <p>(системные требования: CPU Pentium III 800MHz, 128Mb RAM!!)</p>\n      </div>\n    </div>\n  );\n}\n\nexport default React.memo(Text);\n","import React from \"react\";\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faRedoAlt } from '@fortawesome/free-solid-svg-icons';\n\nconst BtnRestart = React.forwardRef((props, ref) => {\n  return (\n    <button ref={ref} className='btn-restart' type='button' onClick={props.handleRestart}>\n      <FontAwesomeIcon icon={faRedoAlt} />\n      ЗАНОВО\n    </button>\n  );\n});\n\nexport default BtnRestart;","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faClock } from '@fortawesome/free-regular-svg-icons';\n\nfunction Speed(props) {\n  return (\n    <div className='badge'>\n      <p>\n        <FontAwesomeIcon icon={faClock} />\n        СКОРОСТЬ\n      </p>\n      <p><span>{props.speed}</span> зн/мин</p>      \n    </div>\n  );\n}\n\nexport default Speed;\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faCrosshairs } from '@fortawesome/free-solid-svg-icons';\n\nfunction Precision(props) {\n  const { current, errors } = props;\n  const precision = current\n    ? Math.round(current * 100 / (current + errors))\n    : 100;\n  return (\n    <div className='badge'>\n      <p>\n        <FontAwesomeIcon icon={faCrosshairs} />\n        ТОЧНОСТЬ\n      </p>\n      <p><span>{precision}%</span></p>\n    </div>\n  );\n}\n\nexport default Precision;\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faTrophy } from '@fortawesome/free-solid-svg-icons';\nimport Speed from './Speed';\nimport Precision from './Precision';\n\nfunction Result(props) {\n  const { speed, current, errors } = props;\n\n  let record = JSON.parse(localStorage.getItem('record'));\n  let newRecord = false;\n  if (!record || record.speed <= speed) {\n    newRecord = true;\n    record = { speed, current, errors };\n    localStorage.setItem('record', JSON.stringify(record));\n  }\n\n  return (\n    <div className='text result'>\n      {newRecord\n        ? <p>\n            <FontAwesomeIcon icon={faTrophy} />\n            Поздравляем, это новый рекорд!\n          </p>\n        : <p>Поздравляем, хороший результат!</p>}\n      <div className='record'>\n        <p>\n        <FontAwesomeIcon icon={faTrophy} />\n          Текущий рекорд:\n        </p>\n        <div className='performance'>\n          <Speed speed={record.speed} />\n          <Precision current={record.current} errors={record.errors} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Result;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport Text from './Text';\nimport BtnRestart from './BtnRestart';\nimport Speed from './Speed';\nimport Precision from './Precision';\nimport Result from './Result';\n\nconst defaultText = 'We successfully applied the direct quantitative monitoring of resistance genes in meat, which generally might aid as a useful and rapid additional tool for risk assessment. We know that bacteria provide a large pool of resistance genes, which are widely shared between each other. Thus, in terms of resistance gene monitoring, we should sometimes overcome the restricted view on single bacteria and look at the gene pool, instead.';\n\nfunction Trainer() {\n  const [current, setCurrent] = useState(0);\n  const [errors, setErrors] = useState(0);\n  const [text, setText] = useState('');\n  const [start, setStart] = useState(false);\n\n  /*\n   * Получение текста через API при первой загрузке\n  */\n  useEffect(() => fetchText(), []);\n\n  async function fetchText() {\n    try {\n      const response = await fetch('https://baconipsum.com/api/?type=meat-and-filler&sentences=5');\n      if (!response.ok) throw new Error('Network response was not OK');\n      const [text] = await response.json();\n      setText(text);\n    }\n    catch(err) {\n      console.error(err);\n      setText(defaultText);\n    }\n  }\n\n  /*\n   * Привязка листенера при получении текста и обработка нажатий клавиш\n  */\n  useEffect(() => {\n    function handleKeyDown(e) {\n      if (e.key.length !== 1) return; // проверка, что клавиша \"символьная\"\n      setCurrent(c => {\n        if (c === 0) setStart(true);\n        if (e.key === text[c]) {\n          if (c >= length - 1) {\n            setStart(false);\n            setText('');\n          }\n          return c + 1;\n        }\n        setErrors(e => e + 1);\n        return c;\n      });\n    }\n    let length = text.length;\n    if (text) document.addEventListener('keydown', handleKeyDown);\n    return () => document.removeEventListener('keydown', handleKeyDown);\n  }, [text]);\n\n  /*\n   * Изменение CSS-классов символов в процессе печати\n  */\n  const main = useRef(null);\n\n  useEffect(() => {\n    let id;\n    if (start) id = setInterval(() => main.current.classList.toggle('cursor-blink'), 600);\n    return () => clearInterval(id);\n  }, [start]);\n\n  useEffect(() => {\n    const currSymbol = document.getElementById(`${current}`);\n    if (currSymbol) currSymbol.classList.add('current');\n    const prevSymbol = document.getElementById(`${current - 1}`);\n    if (prevSymbol) prevSymbol.classList.replace('current', 'complete');\n    main.current.classList.remove('cursor-blink');\n  }, [current, text]);\n\n  useEffect(() => {\n    if (errors) document.getElementById(`${current}`).classList.add('error');\n  }, [errors]);\n\n  /*\n   * Мониторинг скорости печати\n  */\n  const [speed, setSpeed] = useState(0);\n  const time = useRef(0);\n  const countSpeed = useRef();\n\n  useEffect(() => {\n    let id;\n    if (start) id = setInterval(() => countSpeed.current(), 1000);\n    return () => {\n      clearInterval(id);\n      time.current = 0;\n    }\n  }, [start]);\n  \n  useEffect(() => {\n    function callback() {\n      time.current += 1;\n      setSpeed(Math.round(current * 60 / time.current) || 0);\n    }\n    countSpeed.current = callback;\n  }, [current]);\n\n  /*\n   * Функционал кнопки Restart\n  */\n  const btnRestart = useRef(null);\n\n  function handleRestart() {    \n    setText('');\n    setStart(false);\n    setCurrent(0);\n    setErrors(0);\n    setSpeed(0);\n    fetchText();\n    btnRestart.current.blur();\n  }\n\n  /*\n   * Проверка окончания текста для рендеринга результатов\n  */\n  const finish = (!start && current !== 0) ? true : false;\n\n  return (\n    <main ref={main}>\n      <div className={finish ? 'performance result' : 'performance'}>\n        <Speed speed={speed} />\n        <Precision current={current} errors={errors} />\n      </div>\n      {finish \n        ? <Result speed={speed} current={current} errors={errors} />\n        : <Text text={text} />}\n      <BtnRestart ref={btnRestart} handleRestart={handleRestart} />\n    </main>\n  );\n}\n\nexport default Trainer;\n","import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faKeyboard } from '@fortawesome/free-solid-svg-icons';\n\nfunction Header() {\n  return (\n    <header>\n      <h1>\n        <FontAwesomeIcon icon={faKeyboard} />\n        Клавиатурный тренажер\n      </h1>\n    </header>\n  );\n}\n\nexport default Header;\n","function Footer() {\n  return (\n    <footer>\n        <p>&copy; 2021, Aleafan</p>\n    </footer>\n  )\n}\n\nexport default Footer;\n","import React from 'react';\nimport Trainer from './components/Trainer';\nimport Header from './components/Header';\nimport Footer from './components/Footer';\n\nfunction App() {\n  return (\n    <React.Fragment>\n      <Header />\n      <Trainer />\n      <Footer />\n    </React.Fragment>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles/normalize.css';\nimport './styles/index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}